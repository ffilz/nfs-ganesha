{
  "comments": [
    {
      "key": {
        "uuid": "5b7a1329_a59efb3e",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-04-16T16:50:01Z",
      "side": 1,
      "message": "I don\u0027t see any way for state_lock() to return STATE_LOCK_BLOCKED without using the block_data.  What am I missing?",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "18d809cc_464e4b2f",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1003947
      },
      "writtenOn": "2019-04-16T17:25:14Z",
      "side": 1,
      "message": "See line number 2387 in state_lock(). It does quick return.",
      "parentUuid": "5b7a1329_a59efb3e",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "645ef594_d59b4a0c",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-04-16T17:54:11Z",
      "side": 1,
      "message": "Okay.",
      "parentUuid": "18d809cc_464e4b2f",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f598413_38299fb2",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2019-04-16T16:48:01Z",
      "side": 1,
      "message": "How about we simplify and refcount the block_data? If it\u0027s held, then increment the refcount?",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ead49d70_a419512e",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-04-16T17:54:11Z",
      "side": 1,
      "message": "Or how about we just allocate it in state_lock() when needed, rather than ahead of time?",
      "parentUuid": "9f598413_38299fb2",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44395131_af465897",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2019-04-16T18:47:21Z",
      "side": 1,
      "message": "state_lock doesn\u0027t know what goes in it... It\u0027s nlm specific (and if we ever implement 4.1 lock call backs we\u0027ll need a 4.1 specific block data).\n\nWe could pass in a stack struct, and then state_lock copies to a dynamic struct if it actually needs it. That would save allocation when not needed in exchange for a copy when needed.",
      "parentUuid": "ead49d70_a419512e",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f841f0d4_259daaee",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1003947
      },
      "writtenOn": "2019-04-17T02:52:53Z",
      "side": 1,
      "message": "Refcounts is a big hammer, if there is no other use except this, I would rather pass a used/not boolean as an OUT value from state_lock. What do you guys think?",
      "parentUuid": "9f598413_38299fb2",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ca50907_ebffbf89",
        "filename": "src/Protocols/NLM/nlm_Lock.c",
        "patchSetId": 1
      },
      "lineNbr": 188,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-04-17T11:53:36Z",
      "side": 1,
      "message": "Or just pass in \u0026pblock_data and NULL it out if we use it.  Then we can unconditionally free it if it\u0027s not NULL.",
      "parentUuid": "f841f0d4_259daaee",
      "revId": "9176edbbd368f9e35dd26bc728711970efc67e6a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}