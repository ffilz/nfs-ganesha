{
  "comments": [
    {
      "key": {
        "uuid": "922f3506_55f0e637",
        "filename": "src/FSAL/FSAL_MEM/mem_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 2081,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2018-06-07T18:03:31Z",
      "side": 1,
      "message": "You only need these functions if you actually can use FSAL_MEM without mdcache stacking.\n\nOptionally, we could require all FSALs to implement ref counting and have mdcache do refcounting...\n\nOtherwise your solution of internal ref counting seems reasonable.",
      "revId": "41fd11ff1b58bcc6cb5e84ee752889dc9b5bd4ae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03fee608_7b1e5aef",
        "filename": "src/FSAL/FSAL_MEM/mem_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 2081,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2018-06-07T18:21:24Z",
      "side": 1,
      "message": "Nope, you need them if you don\u0027t create a new handle on every lookup/readdir.  If lookup/readdir return the same handle each time, then you need refcounting to avoid use-after-free.\n\nAdmittedly, not a problem for most FSALs.",
      "parentUuid": "922f3506_55f0e637",
      "revId": "41fd11ff1b58bcc6cb5e84ee752889dc9b5bd4ae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fb365313_bdddcfa1",
        "filename": "src/FSAL/FSAL_MEM/mem_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 2135,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2018-06-07T18:03:31Z",
      "side": 1,
      "message": "If FSAL_MEM does share reservation stuff, merge has to merge share reservations (see what vfs_merge does).",
      "revId": "41fd11ff1b58bcc6cb5e84ee752889dc9b5bd4ae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe51f48a_856ab808",
        "filename": "src/FSAL/FSAL_MEM/mem_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 2135,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2018-06-07T18:19:44Z",
      "side": 1,
      "message": "Ok, handled in subsequent patch.",
      "parentUuid": "fb365313_bdddcfa1",
      "revId": "41fd11ff1b58bcc6cb5e84ee752889dc9b5bd4ae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fa6144c_9b243a29",
        "filename": "src/FSAL/FSAL_MEM/mem_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 2135,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2018-06-07T18:21:24Z",
      "side": 1,
      "message": "Separate patch.",
      "parentUuid": "fe51f48a_856ab808",
      "revId": "41fd11ff1b58bcc6cb5e84ee752889dc9b5bd4ae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}