{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "53edea4e_a5e00646",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2023-02-06T00:12:16Z",
      "side": 1,
      "message": "Credit for this goes to Kyle Lippincott at Google. I\u0027m just submitting the change.\n\nOne example is here:\nhttps://github.com/nfs-ganesha/nfs-ganesha/blob/next/src/FSAL/FSAL_MEM/mem_export.c#L167",
      "revId": "8a7b39ea5c7977112521584df6783f36f909c7b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd1323c6_ef7b9518",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2023-02-06T16:07:25Z",
      "side": 1,
      "message": "Looks okay, but every FSAL overrides alloc_state, so it shouldn\u0027t make a difference.",
      "revId": "8a7b39ea5c7977112521584df6783f36f909c7b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97f402fa_284b96e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2023-02-06T20:20:12Z",
      "side": 1,
      "message": "Hmm...\n\nFSAL_PROXY_V3 doesn\u0027t override alloc_state, and it doesn\u0027t use fsal_fd, I\u0027m honestly not sure what it does with all the state stuff...\n\nNot every FSAL uses a fsal_fd after the state_t (see FSAL_PROXY_V4 for example)\n\nThat means the default status2 really isn\u0027t a good idea...\n\nI think the default status2 should be in commonlib with the fsal_fd stuff for explicit use by those FSALs that follow the convention of state_t followed by fsal_fd and the default status2 return not supported.\n\nAnd status2 is actually sort of problematic since technically it could race... \n\nIt\u0027s used in two places, by NFSv4 OPEN upgrade and by 9P to check open mode before allowing a lock (not sure this is really required).\n\nI don\u0027t see any other actual uses that depend on fsal_fd being after state_t that aren\u0027t FSAL specific code that understands it\u0027s using fsal_fd.\n\nConsidering I have a huge patch set that has some fsal_fd work in it, perhaps I should make fixing this all up properly be part of that re-work.",
      "revId": "8a7b39ea5c7977112521584df6783f36f909c7b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}