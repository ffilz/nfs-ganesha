{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "82379860_5e1dfef9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2022-06-24T21:00:16Z",
      "side": 1,
      "message": "When does this occur that a state_t has no state_exp attached? Please add more description of the issue to the commit message.\n\nI want to understand if this is actually the correct fix, or is sweeping something under the rug.",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73dec205_cdcdf3a0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2022-06-24T21:52:32Z",
      "side": 1,
      "message": "I think there are two patches addressing the same underlying issue, the other patch is:\n\nhttps://review.gerrithub.io/c/ffilz/nfs-ganesha/+/539537",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b099832_30379d6f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1019791
      },
      "writtenOn": "2022-06-27T00:03:28Z",
      "side": 1,
      "message": "Thanks the reply, actually I do not find why state_exp is NULL, but ganesha actually core at this position, and in coredump, I find state_exp is NULL.",
      "parentUuid": "82379860_5e1dfef9",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e872e64_4d73f3b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1019791
      },
      "writtenOn": "2022-06-27T00:23:17Z",
      "side": 1,
      "message": "I will continue to find the root cause",
      "parentUuid": "1b099832_30379d6f",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5949d59f_efb66d72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2022-06-27T15:36:44Z",
      "side": 1,
      "message": "Do you have stack back trace? You COULD be hitting the issue in the other patch, though looking at the code I never see state_exp being set to NULL.\n\nActually, I think we need to eliminate use of state_exp. Anything that works on a state SHOULD have op_ctx set up with the proper export, so we should just be able to use op_ctx-\u003efsal_export.\n\nLet me contemplate this and put forth an alternate patch.\n\nIn the meantime, it would still be good to understand how state_exp got to be NULL.",
      "parentUuid": "8e872e64_4d73f3b8",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddc61ed5_092099c6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2022-06-27T23:31:13Z",
      "side": 1,
      "message": "See this patch as a better solution: https://review.gerrithub.io/c/ffilz/nfs-ganesha/+/540556\n\nI AM still interested in the cause of this. The state_exp pointer is never set to NULL, so it may be a use after free situation.",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "281545c6_a3baeb24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1019791
      },
      "writtenOn": "2022-06-27T23:43:19Z",
      "side": 1,
      "message": "The stack is nfs_worker_thread.c:nfs_rpc_process_request -\u003e nfs4_Compound.c:nfs4_Compound -\u003e nfs4_Compound.c:process_one_op -\u003e nfs4_op_read.c:nfs4_op_read -\u003e nfs4_op_read.c:nfs4_read -\u003e sal_functions.h:dec_state_t_ref -\u003e nfs4_state_id.c:dec_nfs4_state_ref.\n\nI check a lot of coredump, all of them core at the same above stack. Besides, sometimes the state-\u003estate_exp is not NULL, but is a very short address. Sometimes, \nstate-\u003estate_exp is valid, but when gdb print state-\u003estate_exp-\u003eexp_ops, it report \"Cannot access memory at address xxx\"",
      "parentUuid": "5949d59f_efb66d72",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c408a3ba_850b16d8",
        "filename": "src/SAL/nlm_state.c",
        "patchSetId": 2
      },
      "lineNbr": 484,
      "author": {
        "id": 1005370
      },
      "writtenOn": "2022-06-21T11:25:55Z",
      "side": 1,
      "message": "WARNING: line over 80 characters\n+\t\t\tstate-\u003estate_exp-\u003eexp_ops.free_state(state-\u003estate_exp, state);",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9fd66dbd_1dd83abb",
        "filename": "src/SAL/nlm_state.c",
        "patchSetId": 2
      },
      "lineNbr": 484,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2022-06-24T21:00:16Z",
      "side": 1,
      "message": "Please fix this long line.",
      "parentUuid": "c408a3ba_850b16d8",
      "revId": "76829dc75eb0a22bbc8b2a0b33145b78819045e4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}