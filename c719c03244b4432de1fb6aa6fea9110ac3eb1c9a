{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "dc0b73af_b8956649",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T14:17:12Z",
      "side": 1,
      "message": "Looks pretty good.  A few issues.",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d501b83_8739437c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T15:13:24Z",
      "side": 1,
      "message": "Also, it appears the mdcache cache trackers aren\u0027t being called?",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d925d43f_615e8bc6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-23T23:17:30Z",
      "side": 1,
      "message": "Now added.",
      "parentUuid": "3d501b83_8739437c",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43271263_7a1fccd5",
        "filename": "src/CMakeLists.txt",
        "patchSetId": 5
      },
      "lineNbr": 1497,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T14:17:12Z",
      "side": 1,
      "message": "These bits are for nfs-ganesha.spec-in.cmake so you need to modify that file as well.  This will enable \"make rpm\" to work properly.",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cc90f3d_0987ec4f",
        "filename": "src/libntirpc",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T14:17:12Z",
      "side": 1,
      "message": "Is this change supposed to be updating ntirpc?  I don\u0027t remember seeing a PR on ntirpc that goes with this.",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66c9de1d_eac8b7a1",
        "filename": "src/libntirpc",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-23T23:17:30Z",
      "side": 1,
      "message": "That\u0027s a mistake and I\u0027ll remove it.\n\nI have a local modification based on my systems libraries: setrpcent(int) and endrpcent(void) have __THROW in their declarations.",
      "parentUuid": "1cc90f3d_0987ec4f",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbae825d_bf1d2f3d",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T14:17:12Z",
      "side": 1,
      "message": "Should we make optabv4 and optabv3 usable for this, rather than duplicating?  I\u0027m worried about these not being updated if anything changes.",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99c72df8_08b9acd1",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2021-11-23T15:58:00Z",
      "side": 1,
      "message": "Yea, can we use the optabs for the op names and nfsstat3_to_str and nfsstat4_to_str for the errors? Any particular reason you used lower case? I think keeping these consistent with the RFC etc. is best.",
      "parentUuid": "cbae825d_bf1d2f3d",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "831012b0_6327808a",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-23T23:17:30Z",
      "side": 1,
      "message": "Sure, we can use upper case. I find it more pleasant to read lower case in monitoring dashboards. We can export the names as RFC compliant upper case and lower case the names in the aggregation.",
      "parentUuid": "99c72df8_08b9acd1",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "062a42c9_ab19b18d",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-24T09:18:41Z",
      "side": 1,
      "message": "Updated code to use nfsstat[34]_to_str(), nfsproc3_to_str() and nfsop4_to_str():\n  Defined in include/nfs_convert.h\n  Implemented in support/nfs_convert.c\n  Using the same optabv3 and optabv4, moved from support/server_stats.c",
      "parentUuid": "831012b0_6327808a",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87915b66_f105b8bf",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2021-11-24T15:22:39Z",
      "side": 1,
      "message": "Oh gosh, there are two different optabv4... There\u0027s also one in src/Protocols/NFS/nfs4_Compound.c...\n\nThere\u0027s also operation tables in src/MainNFSD/nfs_worker_thread.c\n\nWe really should consider combining those things, though the ones in nfs_worker_thread.c and nfs4_Compound.c have prefixes, but maybe those should be dropped.",
      "parentUuid": "062a42c9_ab19b18d",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b546fc46_c3959239",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-25T03:27:41Z",
      "side": 1,
      "message": "Got it. I feel like this is getting complicated, so I\u0027ll send it as a separate change from the monitoring stack.",
      "parentUuid": "87915b66_f105b8bf",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "314c3ecb_4b6df458",
        "filename": "src/monitoring/nfs_names.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-25T10:14:39Z",
      "side": 1,
      "message": "I\u0027ve submitted a separate change for the optabs. Let\u0027s sort that out first, before we push this change forwards. Thanks!",
      "parentUuid": "b546fc46_c3959239",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "78d84ec3_4d67ae45",
        "filename": "src/support/fridgethr.c",
        "patchSetId": 5
      },
      "lineNbr": 1404,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-23T14:17:12Z",
      "side": 1,
      "message": "It appears that these set a global thread_max in the monitoring.  However, there are many thread fridges in Ganesha, each with their own min and max values, so I think these may need to sum-up rather than setting?",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52d78003_fcee262d",
        "filename": "src/support/fridgethr.c",
        "patchSetId": 5
      },
      "lineNbr": 1404,
      "author": {
        "id": 1015854
      },
      "writtenOn": "2021-11-23T23:17:30Z",
      "side": 1,
      "message": "Ah, I thought there was only one thread fridge for NFS worker threads. Controlled by \"_9P { Nb_Worker \u003d XXX; }\" in the configuration file.\n\nFrom a monitoring point of view, the goal is to display the {min,current,max} number of threads in use, so the user can tune the number of threads needed.",
      "parentUuid": "78d84ec3_4d67ae45",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b01b043e_939408c1",
        "filename": "src/support/fridgethr.c",
        "patchSetId": 5
      },
      "lineNbr": 1404,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2021-11-24T15:22:39Z",
      "side": 1,
      "message": "Yea, so you might want to monitor each Fridge thread pool. Some Fridges are just a single thread though, so probably not worth monitoring them. Others may be a thread per export or file system which probably also aren\u0027t worth monitoring.",
      "parentUuid": "52d78003_fcee262d",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b4a711c_8ccf5cd4",
        "filename": "src/support/fridgethr.c",
        "patchSetId": 5
      },
      "lineNbr": 1404,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2021-11-29T15:02:49Z",
      "side": 1,
      "message": "Interesting, I sort of take this back.  fridgethr_populate() is only called by 9p (which, by the way, is unrelated to NFS).  So this is technically okay, but will start to fail if anyone else ever calls fridghthr_populate().  The actual threads that run NFS operations are created by ntirpc, not by Ganesha.",
      "parentUuid": "b01b043e_939408c1",
      "revId": "c719c03244b4432de1fb6aa6fea9110ac3eb1c9a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}