{
  "comments": [
    {
      "key": {
        "uuid": "006cf594_26dd18a2",
        "filename": "src/config_parsing/conf_url_rados.c",
        "patchSetId": 1
      },
      "lineNbr": 371,
      "author": {
        "id": 1004075
      },
      "writtenOn": "2019-02-01T14:45:16Z",
      "side": 1,
      "message": "I wish there were another way to do this",
      "revId": "ef22648bd764ee458d33782987fca35493dae6d8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7c9bdfe_e5ab85ba",
        "filename": "src/config_parsing/conf_url_rados.c",
        "patchSetId": 1
      },
      "lineNbr": 371,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-02-01T15:06:38Z",
      "side": 1,
      "message": "You could export reread_config() and call it directly.  You\u0027d have to block signals while you\u0027re doing it.",
      "parentUuid": "006cf594_26dd18a2",
      "revId": "ef22648bd764ee458d33782987fca35493dae6d8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "336a3611_3362937a",
        "filename": "src/config_parsing/conf_url_rados.c",
        "patchSetId": 1
      },
      "lineNbr": 371,
      "author": {
        "id": 1008909
      },
      "writtenOn": "2019-02-01T15:15:07Z",
      "side": 1,
      "message": "The problem there though is that this runs in the context of a thread spawned by librados. I don\u0027t really want to do reread_config from that context. Sending a signal ensures that we do that from the context of the sigmgr thread instead which is already known to be safe.\n\nWe could have some alternate way to wake up and internally signal that the config should be reread, but really...what\u0027s the problem with using signals here? Are you concerned about an actual issue, or is this just an aesthetic thing?",
      "parentUuid": "b7c9bdfe_e5ab85ba",
      "revId": "ef22648bd764ee458d33782987fca35493dae6d8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee5f62ff_1dc32156",
        "filename": "src/config_parsing/conf_url_rados.c",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-02-01T15:06:38Z",
      "side": 1,
      "message": "Is this level triggered or edge triggered?  Are we going to get a gratuitous callback at the beginning?",
      "revId": "ef22648bd764ee458d33782987fca35493dae6d8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daea4ff9_e4b74f84",
        "filename": "src/config_parsing/conf_url_rados.c",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1008909
      },
      "writtenOn": "2019-02-01T15:21:44Z",
      "side": 1,
      "message": "Edge triggered, AFAIK. I\u0027ve not seen any evidence of a spurious callback when things get set up.\n\nBasically this sets up a watch on the primary OSD, and when another program calls rados_notify() on the object, the OSD will issue a notify message to all of its watchers. The librados client will then issue the callback for each watch that was set up. If the watch is set up after the notification occurs, then I don\u0027t think it\u0027ll get a notification.",
      "parentUuid": "ee5f62ff_1dc32156",
      "revId": "ef22648bd764ee458d33782987fca35493dae6d8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}