{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e5ff4680_4563c59a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2024-09-03T14:08:43Z",
      "side": 1,
      "message": "This is safe, but whatever...  I would object to this, but junctions aren\u0027t likely to be too common.   This will noticeably slow down large homedir workloads, where each homedir is an export, but I doubt that\u0027s very common.",
      "revId": "6ab713b382b70cfe757d0db44b54f88e017d8cc3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4880c2ce_ca5d0ef8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2024-09-03T14:35:32Z",
      "side": 1,
      "message": "Good point about the safety and the impact.\n\nOn the impact, it\u0027s going to slow down a READDIR of a pseudofs directory that has a huge number of exports. That isn\u0027t something to be too concerned about, but it is enough of a concern to warrant considering the options:\n\n1. Mark the CID as Intentional - the only possibility of getting a wrong result is if the export is moved within the pseudofs, something we support but is a rare use case. And there\u0027s other factors that will introduce a memory barrier that will reduce or eliminate the risk.\n\n2. Switch to atomic\n\n3. Add the lock as this patch does.\n\nConsidering all the risks, I\u0027m comfortable with option 1.\n\nAnother consideration mitigating risk, the AIX client is the only one I\u0027m aware of that actually cares about MOUNTED_ON_FILEID (this was discovered when testing security flavor negotiation at export boundaries, because AIX actually uses it, it also expects to get it even if it doesn\u0027t have access to the export, and the community agreed that it was an attribute of the parent directory, not the export, thus valid to return.",
      "parentUuid": "e5ff4680_4563c59a",
      "revId": "6ab713b382b70cfe757d0db44b54f88e017d8cc3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}