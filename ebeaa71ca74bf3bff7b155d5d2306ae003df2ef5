{
  "comments": [
    {
      "key": {
        "uuid": "4979654e_78e304a4",
        "filename": "src/FSAL/Stackable_FSALs/FSAL_MDCACHE/mdcache_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 1618,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-08-14T13:28:44Z",
      "side": 1,
      "message": "I\u0027d say this belongs in mdc_get_parent().",
      "revId": "ebeaa71ca74bf3bff7b155d5d2306ae003df2ef5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0b5eddf_62509a49",
        "filename": "src/FSAL/Stackable_FSALs/FSAL_MDCACHE/mdcache_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 1618,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2019-08-14T15:20:54Z",
      "side": 1,
      "message": "I\u0027m not sure it matters, but may be good practice.\n\nlookup_path should never resolve to the root of an export (NFS v3 MOUNT has already determined which export the path is a sub-directory of).\n\nHmm, but before putting it in for lookup of .. on the root of an export, we should make sure that doesn\u0027t break any test cases. I don\u0027t remember what NFS v4 specifies for lookup from Pseudo Root, I think that fails but I think NFS v3 traditionally returns the root of an export for a lookup .. from the root, but I can\u0027t find the documentation to support that...",
      "parentUuid": "4979654e_78e304a4",
      "revId": "ebeaa71ca74bf3bff7b155d5d2306ae003df2ef5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68732a1d_de2f56f9",
        "filename": "src/FSAL/Stackable_FSALs/FSAL_MDCACHE/mdcache_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 1618,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2019-08-14T15:39:56Z",
      "side": 1,
      "message": "fsal_lookup() handles the root case already.",
      "parentUuid": "d0b5eddf_62509a49",
      "revId": "ebeaa71ca74bf3bff7b155d5d2306ae003df2ef5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2463116_310155dd",
        "filename": "src/FSAL/Stackable_FSALs/FSAL_MDCACHE/mdcache_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 1618,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2019-08-14T15:51:08Z",
      "side": 1,
      "message": "Ok, then I definitely agree, put this logic in mdc_get_parent.",
      "parentUuid": "68732a1d_de2f56f9",
      "revId": "ebeaa71ca74bf3bff7b155d5d2306ae003df2ef5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa99b2c5_a9b99d2e",
        "filename": "src/FSAL/Stackable_FSALs/FSAL_MDCACHE/mdcache_handle.c",
        "patchSetId": 1
      },
      "lineNbr": 1618,
      "author": {
        "id": 1008177
      },
      "writtenOn": "2019-08-15T15:12:58Z",
      "side": 1,
      "message": "Can move the logic to mdc_get_parent() but had following comment:\nWhen there is lookup of parent of a non-root object then code execution path will be:\nfsal_lookupp() -\u003e mdcache_lookup() -\u003e mdc_lookup() -\u003e mdc_get_parent()\nHere, fsal_lookupp() already checks if we are doing lookup for a parent of a root object or not. If now this logic is added to mdc_get_parent() then won\u0027t the same check happen twice in this code path ?\n\nI added the change in mdcache_create_handle() as it was getting called in the following code path which doesn\u0027t have a check to find if we are going todo lookup for a parent of a root object or not prior to calling mdc_get_parent().\nnfs3_getattr() -\u003e nfs3_FhandleToCache() -\u003e mdcache_create_handle() -\u003e mdc_get_parent()",
      "parentUuid": "b2463116_310155dd",
      "revId": "ebeaa71ca74bf3bff7b155d5d2306ae003df2ef5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}