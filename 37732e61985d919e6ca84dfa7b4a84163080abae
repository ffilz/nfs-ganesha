{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3a381b0d_e60ed591",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2021-05-25T17:16:21Z",
      "side": 1,
      "message": "Yogendra, could you check this out and see if this is actually something FSAL_GPFS needs, if so, let\u0027s revive it, otherwise we will abandon it.",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53a8db35_24dffd97",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1008177
      },
      "writtenOn": "2017-12-13T05:22:51Z",
      "side": 1,
      "message": "Suggestion: As part of this change, can we have the check for mdcache_lru_fds_available() before this line to check for global FD availability? If available then proceed to get a new FD. And remove the call to mdcache_lru_fds_available() from other places in code.",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c773f552_c67de4a7",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1003947
      },
      "writtenOn": "2017-12-14T18:50:42Z",
      "side": 1,
      "message": "These calls only incr/decr the open_fd_count. Let rest be managed by mdcache at the moment.",
      "parentUuid": "53a8db35_24dffd97",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4aebd54a_30afc54b",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 110,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2017-12-14T19:13:02Z",
      "side": 1,
      "message": "You can\u0027t make mdcache calls from other FSALs... though that call could probably be moved out of mdcache (it does look at lru config, but I think that\u0027s still outside mdcache).",
      "parentUuid": "c773f552_c67de4a7",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "729a14c8_a102e9ac",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1008177
      },
      "writtenOn": "2017-12-13T05:22:51Z",
      "side": 1,
      "message": "Should \u0027open_fd_count\u0027 be incremented for only global FDs? As with the change \u0027open_fd_count\u0027 for state fds would be incremented as well, but as I understand currently LRU works on \u0027open_fd_count\u0027 considering it as a counter for global FDs.",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2aba4358_20f03a6c",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1003947
      },
      "writtenOn": "2017-12-14T18:50:42Z",
      "side": 1,
      "message": "open_fd_count should include all fds (state/tmp/global). The NOFILE parameter is the fd limit (it doesn\u0027t care global vs others). Strictly speaking, counting only global fds is a bug i the current code.",
      "parentUuid": "729a14c8_a102e9ac",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e50427d7_5d7b51e3",
        "filename": "src/FSAL/FSAL_GPFS/fsal_internal.c",
        "patchSetId": 2
      },
      "lineNbr": 115,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2017-12-14T19:13:02Z",
      "side": 1,
      "message": "Yea, Malahal has made a good point that we do actually need to count all the fds. We need to do this for all FSALs that have a real resource per open. On the other hand, we also need to divorce it from the limit on file descriptors since sockets also use file descriptors, and some FSALs open resource may NOT use a file descriptor.",
      "parentUuid": "2aba4358_20f03a6c",
      "revId": "37732e61985d919e6ca84dfa7b4a84163080abae",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}