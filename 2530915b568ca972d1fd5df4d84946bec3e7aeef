{
  "comments": [
    {
      "key": {
        "uuid": "ebfe9404_9824a3b7",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 235,
      "author": {
        "id": 1008909
      },
      "writtenOn": "2020-12-16T11:29:15Z",
      "side": 1,
      "message": "What\u0027s up with the weird indentation?",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8b7e715_d22c1836",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1004087
      },
      "writtenOn": "2020-12-16T14:38:47Z",
      "side": 1,
      "message": "I\u0027m not sure this will work.  MDCACHE creates the storage for the key in mdcache_locate_host(), and it allocates fh_desc-\u003elen bytes.  This will be the sizeof(ceph_host_handle), so we\u0027ll be writing off the end of it here.\n\nI think we need some way to communicate when the key is larger than the host handle?",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09fa38dd_efdecbd3",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2020-12-16T15:40:32Z",
      "side": 1,
      "message": "Crud, you\u0027re probably right. Actually it\u0027s always made me nervous appending to the handle.\n\nMaybe we really need to bite the bullet and have a per-export flag that tells mdcache to also hash by export_id?",
      "parentUuid": "c8b7e715_d22c1836",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c86373c_9b1d3dd9",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1017949
      },
      "writtenOn": "2020-12-16T16:41:34Z",
      "side": 1,
      "message": "Maybe, we could add the export_id to struct ceph_host_handle directly, setting it to zero for the use as ceph_host_handle and the actual export_id when used inside ceph_handle_key.",
      "parentUuid": "09fa38dd_efdecbd3",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69c04c2a_f5db7648",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2020-12-16T18:23:36Z",
      "side": 1,
      "message": "In conversation on IRC, we decided we can just enlarge the buffer allocated (it\u0027s a stack allocation, with a subsequent copy) by mdcache_locate_host (the only caller of handle_to_key)",
      "parentUuid": "2c86373c_9b1d3dd9",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1d19b5d_5c41fe61",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 257,
      "author": {
        "id": 1017949
      },
      "writtenOn": "2020-12-16T09:58:53Z",
      "side": 1,
      "message": "You forgot to register host_to_key in export_ops_init():\n\n  @@ -389,6 +421,7 @@ void export_ops_init(struct export_ops *ops)\n        ops-\u003eprepare_unexport \u003d ceph_prepare_unexport,\n        ops-\u003erelease \u003d release;\n        ops-\u003elookup_path \u003d lookup_path;\n  +     ops-\u003ehost_to_key \u003d host_to_key;\n        ops-\u003ewire_to_host \u003d wire_to_host;\n        ops-\u003ecreate_handle \u003d create_handle;\n        ops-\u003eget_fs_dynamic_info \u003d get_fs_dynamic_info;",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "382fe49e_07b41546",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 257,
      "author": {
        "id": 1008909
      },
      "writtenOn": "2020-12-16T11:29:15Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d1d19b5d_5c41fe61",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8fcb88d3_43a9a898",
        "filename": "src/FSAL/FSAL_CEPH/export.c",
        "patchSetId": 2
      },
      "lineNbr": 257,
      "author": {
        "id": 1003571
      },
      "writtenOn": "2020-12-16T15:40:32Z",
      "side": 1,
      "message": "Oops... that\u0027s what happens when you try to fix code you can\u0027t run...",
      "parentUuid": "382fe49e_07b41546",
      "revId": "2530915b568ca972d1fd5df4d84946bec3e7aeef",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}